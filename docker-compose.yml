services:
  crafty:
    image: registry.craftycontrol.com/crafty:latest
    container_name: crafty
    restart: unless-stopped
    environment:
      TZ: ${TZ}
    ports:
      - "8000:8000"
      - "8443:8443"
    volumes:
      - crafty_config:/crafty/app/config
      - crafty_backups:/crafty/app/backups
      - crafty_servers:/crafty/app/servers
      - crafty_logs:/crafty/app/logs
      - crafty_import:/crafty/app/import

  java_lobby:
    image: itzg/minecraft-server:latest
    container_name: java_lobby
    restart: unless-stopped
    environment:
      EULA: "TRUE"
      TZ: ${TZ}
      TYPE: "FABRIC"
      VERSION: "1.21.1"
      SERVER_NAME: "Lobby"
      LEVEL: "lobby"
      GAMEMODE: "creative"
      DIFFICULTY: "peaceful"
      MAX_PLAYERS: "20"
      MEMORY: "4G"
      MODRINTH_PROJECTS: "bluemap"
    ports:
      - "25565:25565"
      - "8100:8100"
    volumes:
      - java_lobby_data:/data

  java_survival:
    image: itzg/minecraft-server:latest
    container_name: java_survival
    restart: unless-stopped
    environment:
      EULA: "TRUE"
      TZ: ${TZ}
      TYPE: "FABRIC"
      VERSION: "1.21.1"
      SERVER_NAME: "Survival"
      LEVEL: "survival"
      GAMEMODE: "survival"
      DIFFICULTY: "normal"
      MAX_PLAYERS: "20"
      MEMORY: "6G"
      MODRINTH_PROJECTS: "bluemap"
    ports:
      - "25566:25565"
      - "8101:8100"
    volumes:
      - java_survival_data:/data

  teamspeak:
    image: teamspeak:latest
    container_name: teamspeak
    restart: unless-stopped
    environment:
      TS3SERVER_LICENSE: accept
    ports:
      - "9987:9987/udp"
      - "10011:10011"
      - "30033:30033"
    volumes:
      - teamspeak_data:/var/ts3server

  caddy:
    image: caddy:2-alpine
    container_name: caddy
    restart: unless-stopped
    environment:
      CRAFTY_DOMAIN: ${CRAFTY_DOMAIN}
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./Caddyfile:/etc/caddy/Caddyfile:ro
      - caddy_data:/data
      - caddy_config:/config

volumes:
  java_lobby_data:
  java_survival_data:
  crafty_config:
  crafty_backups:
  crafty_servers:
  crafty_logs:
  crafty_import:
  teamspeak_data:
  caddy_data:
  caddy_config:
